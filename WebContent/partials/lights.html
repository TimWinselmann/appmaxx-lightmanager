<!DOCTYPE html>

<div class="col-xs-12 col-sm-4" data-ng-repeat="room in rooms | orderBy : 'name'">

	<div class="panel panel-default" data-ng-if="(lights | filter: light.room.name = room.name).length > 0">
	
		<div class="panel-heading">
			<b>{{room.name}}</b>
			<div style="float: right;">
				<span class="badge">{{(lights | filter: light.room.name = room.name).length}}</span>
			</div>
		</div>
	
		<table class="table">
			<tr class="switch-table-row" 
			    data-ng-repeat="light in lights | filter: light.room.name = room.name | orderBy : 'name'"
			    data-ng-click="toggleLight(light)">
				<td style="vertical-align: middle;">{{light.name}}</td>
				<td width="30%">
					<div data-ng-class="light.state ? 'toggle-button toggle-button-selected' : 'toggle-button'">
						<button>
							<i class="fa fa-lightbulb-o"></i>
						</button>
					</div>
				</td>		
			</tr>
		</table>

	</div>
	
</div>